doctype html
html
  head
    title Secretaria Panel
    link(href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap", rel="stylesheet")
    link(rel="stylesheet" href="/css/secretariaTurnos.css")
    link(rel="stylesheet" href="/css/footerNuevo.css")
    link(rel="stylesheet" href="/css/headerSecretaria.css")
    link(rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css")
  body(class="bodySecreTurno")
    include ../includes/headerSecretaria
    h1(class="h1SecreTurno") ¡Bienvenida, secretaria!
    h2(class="h2SecreTurno") Lista de turnos
    form(method="get" action="/turnos/listarTurnos" class="formSecreTurno")
      input(type="text" name="paciente" placeholder="Buscar paciente" class="inputSecreTurno")
      input(type="text" name="profesional" placeholder="Buscar profesional" class="inputSecreTurno")
      button(type="submit" class="buttonSecreTurno") Filtrar
    section(class="sectionSecreTurnos")
      if turnos && turnos.length
        table#tablaTurnos.tableTurnos
          thead
            tr
              th Turno para
              th Médico
              th Especialidad
              th Sucursal
              th Fecha
              th Hora
              th Observación
              th DNI
              th Estado
              th Acciones
          tbody
            each turno in turnos
              tr(class=turno.estado === 'Por reasignar' ? 'turno-por-reasignar' : '')
                td= turno.paciente_nombre
                td= turno.nombre_medico
                td= turno.especialidad 
                td= turno.sucursal
                td= turno.fecha
                td= turno.hora
                td= turno.detalle_turno
                td
                  if turno.dni_foto_url
                    a(href=turno.dni_foto_url target="_blank")
                      img(src=turno.dni_foto_url alt="DNI Foto" class="dniSecreTurno" width="70" height="50")
                  else
                    p Foto no disponible
                td= turno.estado
                td(class="acciones-cell")
                  a(href=`/turnos/editarTurno/${turno.id}` class="btnEditarSecreTurno") Cambiar estado
                  a(href=`/turnos/detalles/${turno.id}` class="btnEditarSecreTurno") Detalles
                  if turno.estado === 'Por reasignar'
                    a(href=`/turnos/reasignar/${turno.id}` class="btnReasignarSecreTurno") Reasignar
                  else
                    a(href=`/turnos/trasladar/${turno.id}` class="btnEditarSecreTurno") Trasladar turno
            else
              p No hay turnos disponibles
    include ../includes/footer
    script(src="/js/logout.js")
    script(src="/js/tablafecha.js")
    script(src="https://code.jquery.com/jquery-3.7.1.min.js")
    script(src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js")