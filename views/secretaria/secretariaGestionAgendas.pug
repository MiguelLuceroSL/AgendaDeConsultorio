doctype html
html
  head
    title Gestión de Agendas
    link(href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap", rel="stylesheet")
    link(rel="stylesheet" href="/css/secretariaGestionAgendas.css")
    link(rel="stylesheet" href="/css/headerSecretaria.css")
    link(rel="stylesheet" href="/css/footerNuevo.css")
  body
    include ../includes/headerSecretaria
    main.main-gestion-agendas
      h1 Gestión de Agendas Activas

      if profesionales && profesionales.length > 0
        .buscador-container
          input#buscador-profesional(type="text" placeholder="Buscar por nombre de profesional...")
        
        .agendas-container
          each profesional in profesionales
            .profesional-card
              h2.profesional-nombre= profesional.nombre_profesional
              
              each especialidad in Object.values(profesional.especialidades)
                .especialidad-section
                  h3.especialidad-nombre= especialidad.especialidad
                  
                  .agendas-list
                    each agenda in especialidad.agendas
                      .agenda-item
                        .agenda-info
                          p.agenda-sucursal
                            strong Sucursal: 
                            span= agenda.sucursal
                          p.agenda-horario
                            strong Horario: 
                            span= `${agenda.horario_inicio.substring(0, 5)} - ${agenda.horario_fin.substring(0, 5)}`
                          p.agenda-dias
                            strong Días: 
                            span= agenda.dias
                          p.agenda-duracion
                            strong Duración consulta: 
                            span= agenda.tiempo_consulta.substring(0, 5)
                          p.agenda-vigencia
                            strong Vigencia: 
                            span= `${new Date(agenda.dia_inicio).toLocaleDateString('es-AR')} - ${new Date(agenda.dia_fin).toLocaleDateString('es-AR')}`
                          p.agenda-sobreturnos
                            strong Sobreturnos: 
                            span= agenda.max_sobreturnos
                        .agenda-acciones
                          button.btn-eliminar(data-agenda-id=agenda.agenda_id) Eliminar
      else
        .sin-agendas
          p No hay agendas activas registradas

    include ../includes/footer
    script(src="/js/logout.js")
    script(src="/js/gestionAgendas.js")
